// This is your Prisma schema file
// Learn more: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id           String    @id @default(uuid())
  email        String    @unique @db.VarChar(255)
  passwordHash String    @map("password_hash") @db.VarChar(255)
  fullName     String    @map("full_name") @db.VarChar(255)
  createdAt    DateTime  @default(now()) @map("created_at")
  updatedAt    DateTime  @updatedAt @map("updated_at")
  
  profile      UserProfile?

  @@index([email])
  @@map("users")
}

model UserProfile {
  id                 String            @id @default(uuid())
  userId             String            @unique @map("user_id")
  dateOfBirth        DateTime?         @map("date_of_birth") @db.Date
  gender             Gender?
  heightCm           Decimal?          @map("height_cm") @db.Decimal(5, 2)
  currentWeightKg    Decimal?          @map("current_weight_kg") @db.Decimal(5, 2)
  targetWeightKg     Decimal?          @map("target_weight_kg") @db.Decimal(5, 2)
  fitnessGoal        FitnessGoal       @map("fitness_goal")
  activityLevel      ActivityLevel     @map("activity_level")
  dietaryPreference  DietaryPreference? @map("dietary_preference")
  createdAt          DateTime          @default(now()) @map("created_at")
  updatedAt          DateTime          @updatedAt @map("updated_at")
  
  user               User              @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@map("user_profiles")
}

enum Gender {
  male
  female
  other
  prefer_not_to_say
}

enum FitnessGoal {
  lose_weight
  gain_muscle
  maintain
  get_fit
}

enum ActivityLevel {
  sedentary
  light
  moderate
  active
  very_active
}

enum DietaryPreference {
  none
  vegetarian
  vegan
  keto
  paleo
  halal
}
